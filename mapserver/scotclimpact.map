MAP
  NAME "Scotland Climate Change Impact Tool"
  STATUS ON
  SIZE 600 600
  EXTENT -8.6500071815221 54.63323824941572 -0.724609406991657 60.86076643216307
  PROJECTION
    "init=epsg:27700"
  END

  WEB
    IMAGEPATH "/tmp/"
    IMAGEURL "/ms_tmp/"
    METADATA
      "wms_title"          "Scotland Climate Change Impact Tool"
      "wms_abstract"       "map server for "
      "wms_onlineresource" "https://www.geos.ed.ac.uk/maps/ddekler/scotclimpact.map?"
      "wms_srs"            "EPSG:27700" # EPSG:4326 EPSG:4269 EPSG:3978 EPSG:3857"
      "wms_enable_request" "*"
      "wms_getfeatureinfo_formatlist" "text/plain,text/html,application/vnd.ogc.gml,gml,geojson"

      "wfs_title"         "Scotland Climate Change Impact Tool" ##REQUIRED
      "wfs_srs"           "EPSG:27700" ## REQUIRED
      "gml_include_items" "all" ## Optional (serves all attributes for layer)
      "gml_featureid"     "ID" ## REQUIRED
      "gml_types"         "auto" ## Optional (automatically populate the type for the attributes)
      "wfs_enable_request" "*"
      "wfs_use_default_extent_for_getfeature" "false" ## Optional (improves performance of OGR layers)
      "wfs_getfeature_formatlist" "geojson"
    END
  END

  OUTPUTFORMAT
    NAME "geojson"
    DRIVER "OGR/GEOJSON"
    MIMETYPE "application/json; subtype=geojson"
    FORMATOPTION "STORAGE=stream"
    FORMATOPTION "FORM=SIMPLE"
  END

  LAYER
    NAME grid2
    TYPE POLYGON
    STATUS ON
    CONNECTIONTYPE POSTGIS
    CONNECTION "host=postgis user=scotclimpact dbname=scotclimpact password=testingtesting"
    DATA "geometry from (select id as gss_id, st_setsrid(geom, 27700) as geometry, param_a as param_a, param_a as temp from model_parameters) as subquery using unique gss_id using srid=27700"

    PROJECTION
      "init=epsg:27700"
    END

    METADATA
      "wfs_featureid"     "grid2" 
      "wfs_getfeature_formatlist" "geojson"
      "wfs_srs"           "EPSG:27700" ## REQUIRED
      "ows_srs"           "EPSG:27700" ## REQUIRED
      "gml_include_items" "all"
    END
  END
END
